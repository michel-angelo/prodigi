<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Affiliate Cuan Generator Pro</title>

    <!-- LOAD DATABASE -->
    <script src="data_supplier.js"></script>
    <script src="data_konten.js"></script>

    <style>
      /* === VARIABLES & RESET === */
      :root {
        --primary: #059669;
        --primary-dark: #047857;
        --primary-light: #10b981;
        --bg-body: #f3f4f6;
        --text-dark: #111827;
        --text-grey: #6b7280;
        --tiktok: #000000;
        --shopee: #ee4d2d;
        --wa: #25d366;
        --blue-link: #2563eb;
        --blue-light: #eff6ff;
      }
      * {
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
        outline: none;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
        background-color: var(--bg-body);
        margin: 0;
        color: var(--text-dark);
        width: 100%;
        overflow-x: hidden;
      }

      /* === PENGAMAN (HIDDEN BY DEFAULT) === */
      #main-app {
        display: none;
      }

      /* === HEADER === */
      .header {
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-light)
        );
        color: white;
        padding: 25px 20px 60px;
        border-bottom-left-radius: 35px;
        border-bottom-right-radius: 35px;
        box-shadow: 0 10px 30px rgba(16, 185, 129, 0.2);
        text-align: center;
        position: relative;
      }

      .wa-input-wrapper {
        background: rgba(255, 255, 255, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.3);
        display: inline-flex;
        align-items: center;
        padding: 8px 15px;
        border-radius: 50px;
        backdrop-filter: blur(5px);
        margin-top: 10px;
      }
      .wa-input-wrapper input {
        background: transparent;
        border: none;
        color: white;
        font-weight: bold;
        width: 140px;
        font-size: 14px;
      }
      .wa-input-wrapper input::placeholder {
        color: rgba(255, 255, 255, 0.7);
      }

      .btn-panduan {
        background: rgba(0, 0, 0, 0.2);
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 12px;
        cursor: pointer;
        margin-top: 12px;
        display: inline-block;
        transition: background 0.3s;
      }
      .btn-panduan:active {
        background: rgba(0, 0, 0, 0.4);
      }

      /* === SEARCH & LIST === */
      .search-container {
        padding: 0 20px;
        margin-top: -30px;
        position: relative;
        z-index: 10;
        text-align: center;
      }
      .search-box {
        background: white;
        border-radius: 50px;
        padding: 5px 20px;
        display: flex;
        align-items: center;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        border: 2px solid white;
      }
      .search-box input {
        border: none;
        width: 100%;
        padding: 12px 0;
        font-size: 16px;
        color: #333;
      }

      .container {
        padding: 20px;
        padding-bottom: 100px;
        max-width: 600px;
        margin: 0 auto;
      }
      .product-list {
        display: grid;
        gap: 15px;
      }

      .card {
        background: white;
        padding: 20px;
        border-radius: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.02);
        border: 1px solid rgba(0, 0, 0, 0.03);
        display: flex;
        flex-direction: column;
      }
      .card h3 {
        font-size: 16px;
        font-weight: 700;
        margin: 0 0 10px;
        line-height: 1.4;
      }
      .meta-row {
        display: flex;
        justify-content: space-between;
        background: #f0fdf4;
        padding: 10px;
        border-radius: 10px;
        margin-bottom: 15px;
        font-size: 13px;
      }
      .btn-cuan {
        background: linear-gradient(
          to right,
          var(--primary),
          var(--primary-light)
        );
        color: white;
        border: none;
        padding: 12px;
        border-radius: 12px;
        font-weight: bold;
        cursor: pointer;
        width: 100%;
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
      }

      /* === MODAL GENERATOR === */
      .modal {
        display: none;
        position: fixed;
        z-index: 999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(4px);
      }
      .modal-content {
        background-color: #fff;
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        width: 100%;
        max-width: 500px;
        margin: auto;
        border-top-left-radius: 25px;
        border-top-right-radius: 25px;
        padding: 25px;
        max-height: 90vh;
        overflow-y: auto;
        animation: slideUp 0.3s ease;
      }
      @keyframes slideUp {
        from {
          transform: translateY(100%);
        }
        to {
          transform: translateY(0);
        }
      }

      /* TABS */
      .tab-container {
        display: flex;
        background: #f1f5f9;
        padding: 5px;
        border-radius: 12px;
        margin-bottom: 15px;
      }
      .tab-btn {
        flex: 1;
        padding: 10px 5px;
        text-align: center;
        font-size: 11px;
        font-weight: bold;
        border-radius: 10px;
        cursor: pointer;
        color: #64748b;
        transition: all 0.2s;
      }
      .tab-btn.active.wa {
        background: white;
        color: var(--wa);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      }
      .tab-btn.active.shopee {
        background: white;
        color: var(--shopee);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      }
      .tab-btn.active.tiktok {
        background: white;
        color: var(--tiktok);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      }

      .tips-box {
        padding: 12px;
        border-radius: 10px;
        font-size: 12px;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
        line-height: 1.4;
      }
      .copy-area {
        background: #f8fafc;
        border: 1px dashed #cbd5e1;
        padding: 15px;
        border-radius: 12px;
        font-family: monospace;
        font-size: 12px;
        color: #334155;
        margin: 5px 0 15px;
        white-space: pre-wrap;
      }

      /* ACTION BUTTONS */
      .btn-action {
        display: block;
        width: 100%;
        padding: 12px;
        margin-bottom: 8px;
        border-radius: 10px;
        text-align: center;
        font-weight: bold;
        font-size: 13px;
        cursor: pointer;
        text-decoration: none;
        border: none;
      }
      .btn-copy {
        background: #fef08a;
        color: #854d0e;
        border: 1px solid #fde047;
      }
      .btn-supplier {
        background: var(--primary);
        color: white;
      }
      .btn-shopee {
        background: var(--shopee);
        color: white;
      }
      .btn-tiktok {
        background: var(--tiktok);
        color: white;
      }

      /* === MODAL PANDUAN & UPSELL === */
      .accordion {
        background-color: #f9f9f9;
        cursor: pointer;
        padding: 15px;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        font-size: 14px;
        border-radius: 10px;
        margin-bottom: 5px;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
      }
      .accordion:after {
        content: "+";
        font-weight: bold;
      }
      .accordion.active:after {
        content: "-";
      }

      .panel {
        padding: 0 15px;
        background-color: white;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.2s ease-out;
        font-size: 13px;
        color: #555;
      }

      /* BOX JUALAN EBOOK (INI PENTING) */
      .upsell-box {
        background: var(--blue-light);
        border: 1px dashed var(--blue-link);
        padding: 15px;
        border-radius: 10px;
        margin: 15px 0;
        text-align: center;
        display: block !important;
      }
      .upsell-title {
        font-size: 12px;
        color: #1e40af;
        margin-bottom: 8px;
        display: block;
      }
      .btn-ebook {
        background: var(--blue-link);
        color: white;
        display: block;
        width: 100%;
        padding: 12px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        font-size: 13px;
        box-shadow: 0 4px 6px rgba(37, 99, 235, 0.2);
      }
      .btn-ebook span {
        background: #fbbf24;
        color: #92400e;
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 10px;
        margin-left: 5px;
        vertical-align: middle;
      }

      /* === SCREEN BLOKIR === */
      #blocked-screen {
        display: none;
        text-align: center;
        padding: 60px 20px;
        color: #333;
        max-width: 400px;
        margin: 0 auto;
      }
      .btn-beli-akses {
        display: block;
        width: 100%;
        background: #fbbf24;
        color: #92400e;
        padding: 15px;
        border-radius: 12px;
        font-weight: bold;
        text-decoration: none;
        margin: 20px 0;
        animation: pulse 2s infinite;
      }
      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.02);
        }
        100% {
          transform: scale(1);
        }
      }

      /* TOAST */
      #toast {
        visibility: hidden;
        min-width: 200px;
        background-color: #111;
        color: #fff;
        text-align: center;
        border-radius: 50px;
        padding: 12px 20px;
        position: fixed;
        z-index: 10000;
        left: 50%;
        bottom: 30px;
        transform: translateX(-50%);
        font-size: 13px;
      }
      #toast.show {
        visibility: visible;
        animation: fadein 0.5s, fadeout 0.5s 2.5s;
      }
      @keyframes fadein {
        from {
          bottom: 0;
          opacity: 0;
        }
        to {
          bottom: 30px;
          opacity: 1;
        }
      }
      @keyframes fadeout {
        from {
          bottom: 30px;
          opacity: 1;
        }
        to {
          bottom: 0;
          opacity: 0;
        }
      }

      /* FOOTER BRAND */
      .footer-brand {
        text-align: center;
        margin-top: 30px;
        font-size: 12px;
        color: var(--text-grey);
      }
      .footer-brand a {
        color: var(--primary);
        text-decoration: none;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <!-- SCREEN BLOKIR -->
    <div id="blocked-screen">
      <h1 style="font-size: 60px; margin: 0">‚õî</h1>
      <h2>AKSES DITOLAK</h2>
      <p>Maaf, ini area PREMIUM. Masukkan kode akses atau beli sekarang.</p>
      <a
        href="https://wa.me/6281385042303?text=Halo%20Admin,%20mau%20beli%20akses%20Affiliate%20Generator%2099rb."
        class="btn-beli-akses"
        >üîì BELI KODE AKSES</a
      >
      <button
        onclick="location.reload()"
        style="
          background: none;
          border: none;
          color: #888;
          text-decoration: underline;
          cursor: pointer;
          margin-top: 20px;
        "
      >
        Refresh Halaman
      </button>
    </div>

    <!-- MAIN APP -->
    <div id="main-app">
      <div class="header">
        <h1 style="margin: 0; font-size: 22px">üí∏ Affiliate Cuan Gen</h1>
        <p style="margin: 5px 0 15px; opacity: 0.9; font-size: 13px">
          Tools Pencari Cuan Halal 2026
        </p>

        <div class="wa-input-wrapper">
          <span>üìû WA:</span>
          <input type="tel" id="userPhone" placeholder="0812xxxx" />
        </div>
        <br />
        <div
          class="btn-panduan"
          onclick="document.getElementById('modalPanduan').style.display='block'"
        >
          üìò BACA PANDUAN CARA PAKAI
        </div>
      </div>

      <div class="search-container">
        <div class="search-box">
          <span style="font-size: 20px; margin-right: 10px">üîç</span>
          <input
            type="text"
            id="searchInput"
            placeholder="Cari barang (cth: Panci)"
          />
        </div>
      </div>

      <div class="container">
        <p
          style="
            text-align: center;
            font-size: 12px;
            color: #666;
            margin-bottom: 10px;
          "
        >
          Menemukan <b id="count">0</b> Produk Siap Jual:
        </p>
        <div class="product-list" id="productList"></div>

        <div class="footer-brand">
          App by
          <a href="https://instagram.com/faset.digital" target="_blank"
            >@faset.digital</a
          >
        </div>
      </div>
    </div>

    <!-- MODAL GENERATOR (HYBRID 3 MODE) -->
    <div id="myModal" class="modal">
      <div class="modal-content">
        <span
          style="
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
          "
          onclick="tutupModal('myModal')"
          >&times;</span
        >
        <h3 style="text-align: center; margin-top: 0">‚öôÔ∏è PILIH MODE JUALAN</h3>

        <!-- 3 TAB MODE -->
        <div class="tab-container">
          <div id="tabWA" class="tab-btn active wa" onclick="gantiMode('wa')">
            üü¢ Dropship WA
          </div>
          <div id="tabShopee" class="tab-btn" onclick="gantiMode('shopee')">
            üü† Shopee Vid
          </div>
          <div id="tabTikTok" class="tab-btn" onclick="gantiMode('tiktok')">
            ‚ö´ TikTok Shop
          </div>
        </div>

        <!-- TIPS & CAPTION -->
        <div id="tipsBox" class="tips-box">Loading...</div>
        <p style="font-size: 12px; font-weight: bold; margin-bottom: 5px">
          CAPTION OTOMATIS:
        </p>
        <div class="copy-area" id="captionBox">Loading...</div>
        <button class="btn-action btn-copy" onclick="copyText()">
          üìã COPY CAPTION
        </button>

        <div
          id="actionArea"
          style="
            border-top: 1px solid #eee;
            padding-top: 15px;
            margin-top: 15px;
          "
        >
          <!-- Tombol Action Muncul Disini -->
        </div>
      </div>
    </div>

    <!-- MODAL PANDUAN (FULL MONETIZE) -->
    <div id="modalPanduan" class="modal">
      <div class="modal-content">
        <span
          style="
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
          "
          onclick="tutupModal('modalPanduan')"
          >&times;</span
        >
        <h3
          style="text-align: center; color: var(--primary); margin-bottom: 5px"
        >
          üéì AKADEMI CUAN
        </h3>
        <p
          style="
            text-align: center;
            font-size: 12px;
            color: #666;
            margin-top: 0;
            margin-bottom: 20px;
          "
        >
          Klik judul untuk baca caranya:
        </p>

        <!-- PANDUAN 1 -->
        <button class="accordion">1. Mode Dropship WA</button>
        <div class="panel">
          <p>Gunakan mode ini untuk jual ke teman/tetangga.</p>
          <ol style="padding-left: 20px; margin: 10px 0">
            <li>Isi nomor WA di halaman depan.</li>
            <li>Copy Caption & Share ke Story WA.</li>
            <li>Teman transfer ke kamu (Harga Jual).</li>
            <li>Kamu order di Supplier (Harga Modal).</li>
            <li>Selisih uang = Keuntunganmu (CASH).</li>
          </ol>
          <!-- UPSELL 1 -->
          <div class="upsell-box">
            <span class="upsell-title">üí° Mau teman berebut beli?</span>
            <a
              href="https://wa.me/6281385042303?text=Halo%20Admin,%20saya%20mau%20beli%20Ebook%20Jago%20Jualan%20WA%2049rb."
              class="btn-ebook"
              >üìò BELI EBOOK "WA MARKETING" <span>RP 49.000</span></a
            >
          </div>
        </div>

        <!-- PANDUAN 2 -->
        <button class="accordion">2. Mode Shopee Video</button>
        <div class="panel">
          <p>Upload video di Shopee Video, tautkan Keranjang Oranye.</p>
          <ol style="padding-left: 20px; margin: 10px 0">
            <li>Klik "Cari di Shopee" untuk ambil Link Affiliate kamu.</li>
            <li>Upload Video, tempel link, dapat komisi!</li>
          </ol>
          <!-- UPSELL 2 -->
          <div class="upsell-box">
            <span class="upsell-title">üí° Masih bingung Shopee Affiliate?</span>
            <a
              href="https://wa.me/6281385042303?text=Halo%20Admin,%20saya%20mau%20beli%20Panduan%20Shopee%20Affiliate%2049rb."
              class="btn-ebook"
              >üìô PANDUAN LENGKAP SHOPEE <span>RP 49.000</span></a
            >
          </div>
        </div>

        <!-- PANDUAN 3 -->
        <button class="accordion">3. Mode TikTok Shop</button>
        <div class="panel">
          <p>TikTok butuh trik khusus karena tidak ada link langsung.</p>
          <ol style="padding-left: 20px; margin: 10px 0">
            <li>Klik tombol <b>COPY NAMA PRODUK</b>.</li>
            <li>Klik tombol <b>BUKA TIKTOK</b>.</li>
            <li>Masuk menu Shop > Marketplace > Paste nama produk.</li>
            <li>Tambahkan ke Showcase & Posting video.</li>
          </ol>
          <!-- UPSELL 3 -->
          <div class="upsell-box">
            <span class="upsell-title"
              >üí° Mau video FYP & Keranjang Kuning meledak?</span
            >
            <a
              href="https://wa.me/6281385042303?text=Halo%20Admin,%20saya%20mau%20beli%20Ebook%20Rahasia%20FYP%2049rb."
              class="btn-ebook"
              >üéµ KITAB RAHASIA TIKTOK <span>RP 49.000</span></a
            >
          </div>
        </div>

        <div
          style="
            text-align: center;
            margin-top: 20px;
            border-top: 1px solid #eee;
            padding-top: 10px;
          "
        >
          <p style="font-size: 11px; color: #888; margin-bottom: 10px">
            Mau beli semua Ebook? Hemat 50%!
          </p>
          <a
            href="https://wa.me/6281385042303?text=Halo%20Admin,%20saya%20mau%20beli%20PAKET%20LENGKAP%20SEMUA%20EBOOK%20seharga%2099rb."
            style="
              background: #4f46e5;
              color: white;
              padding: 10px 15px;
              border-radius: 50px;
              font-size: 12px;
              font-weight: bold;
              text-decoration: none;
              display: inline-block;
            "
            >üì¶ BELI PAKET LENGKAP (Rp 99.000)</a
          >
        </div>
      </div>
    </div>

    <div id="toast">‚úÖ Berhasil Disalin!</div>

    <script>
      // === SECURITY CHECK ===
      (function () {
        const pass = "CUAN2026";
        if (sessionStorage.getItem("sudahLogin") === "true") {
          document.getElementById("main-app").style.display = "block";
        } else {
          setTimeout(() => {
            let input = prompt("üîí MASUKKAN KODE AKSES:");
            if (input === pass) {
              sessionStorage.setItem("sudahLogin", "true");
              document.getElementById("main-app").style.display = "block";
            } else {
              document.getElementById("blocked-screen").style.display = "block";
              document.body.style.backgroundColor = "#fff";
            }
          }, 100);
        }
      })();

      // === VARIABLES & STORAGE ===
      let currentItem = null;
      let currentMode = "wa";

      const phoneInput = document.getElementById("userPhone");
      if (localStorage.getItem("userWA"))
        phoneInput.value = localStorage.getItem("userWA");

      phoneInput.addEventListener("input", (e) => {
        let val = e.target.value;
        if (val.startsWith("08")) val = "628" + val.slice(2);
        localStorage.setItem("userWA", val);
      });

      // === LOAD DATA ===
      if (typeof dataSupplier !== "undefined") {
        renderProduk(dataSupplier.sort(() => 0.5 - Math.random()).slice(0, 50));
      }

      document.getElementById("searchInput").addEventListener("keyup", (e) => {
        const k = e.target.value.toLowerCase();
        if (k.length < 3) return;
        renderProduk(
          dataSupplier
            .filter((i) => i.nama.toLowerCase().includes(k))
            .slice(0, 50)
        );
      });

      function renderProduk(data) {
        const list = document.getElementById("productList");
        list.innerHTML = "";
        document.getElementById("count").innerText = data.length;
        data.forEach((item) => {
          const modal = new Intl.NumberFormat("id-ID").format(item.harga_modal);
          const cuan = new Intl.NumberFormat("id-ID").format(
            item.harga_jual_saran - item.harga_modal
          );
          const div = document.createElement("div");
          div.className = "card";
          div.innerHTML = `<h3>${item.nama}</h3>
                    <div class="meta-row"><span>Modal: Rp ${modal}</span><span style="color:var(--primary); font-weight:bold;">Cuan: +Rp ${cuan}</span></div>
                    <button class="btn-cuan" onclick="openModal(${item.id})">üöÄ PROSES BARANG INI</button>`;
          list.appendChild(div);
        });
      }

      // === LOGIC MODAL & GENERATOR ===
      function openModal(id) {
        currentItem = dataSupplier.find((x) => x.id === id);
        document.getElementById("myModal").style.display = "block";
        updateContent();
      }

      function gantiMode(mode) {
        currentMode = mode;
        document
          .querySelectorAll(".tab-btn")
          .forEach((b) => (b.className = "tab-btn"));
        document.getElementById(
          mode === "wa"
            ? "tabWA"
            : mode === "shopee"
            ? "tabShopee"
            : "tabTikTok"
        ).className = `tab-btn active ${mode}`;
        updateContent();
      }

      function updateContent() {
        if (!currentItem) return;
        const tips = document.getElementById("tipsBox");
        const action = document.getElementById("actionArea");

        // 1. SMART MATCHING CATEGORY
        let catContent = "umum";
        const k = currentItem.kategori.toLowerCase();
        const n = currentItem.nama.toLowerCase();

        if (k.includes("tas") || k.includes("dompet") || n.includes("bag"))
          catContent = "fashion";
        else if (
          k.includes("baju") ||
          k.includes("pakaian") ||
          k.includes("sepatu")
        )
          catContent = "fashion";
        else if (
          n.includes("serum") ||
          n.includes("cream") ||
          k.includes("kecantikan")
        )
          catContent = "skincare";
        else if (
          n.includes("panci") ||
          n.includes("rak") ||
          k.includes("rumah")
        )
          catContent = "rumah_tangga";
        else if (n.includes("obat") || n.includes("vitamin"))
          catContent = "kesehatan";

        // Filter
        let pool = dataKonten.filter((x) => x.kategori.includes(catContent));
        let content =
          pool.length > 0
            ? pool[currentItem.id % pool.length]
            : {
                hook: "üî• RACUN TIKTOK CHECK!",
                caption:
                  "Jujurly barang ini kepake banget. Nyesel kalau gak punya.",
                hashtag: "#racunshopee #viral",
              };

        // 2. BRIDGING SENTENCE (Supaya nyambung)
        const bridges = [
          `Nah, biar makin pas sama tips di atas, Kakak wajib punya **${currentItem.nama}** ini!`,
          `Salah satu solusinya ya pakai **${currentItem.nama}** ini, Kak. Dijamin worth it!`,
          `Mumpung lagi promo, **${currentItem.nama}** ini cocok banget buat praktekin tips tadi.`,
        ];
        const bridge = bridges[Math.floor(Math.random() * bridges.length)];

        // 3. GENERATE TEXT BASED ON MODE
        if (currentMode === "wa") {
          let wa = localStorage.getItem("userWA") || "";
          let linkWA =
            wa.length > 5
              ? `https://wa.me/${wa}?text=${encodeURIComponent(
                  "Halo, mau pesan " + currentItem.nama
                )}`
              : "[ISI NOMOR WA DULU]";

          tips.style.background = "#dcfce7";
          tips.style.color = "#166534";
          tips.innerHTML = `üí° <b>DROPSHIP:</b> Jual ke teman/grup WA. Kamu dapet CASH di depan.`;

          document.getElementById("captionBox").innerText = `${
            content.hook
          }\n\n${
            content.caption
          }\n\n${bridge}\n\nüî• HARGA PROMO: Rp ${new Intl.NumberFormat(
            "id-ID"
          ).format(
            currentItem.harga_jual_saran
          )}\n(Normal: Rp ${new Intl.NumberFormat("id-ID").format(
            currentItem.harga_jual_saran * 1.5
          )})\n\nBuruan pesen sebelum kehabisan!\nKlik link ini buat Order via WA üëá:\n${linkWA}\n\n${
            content.hashtag
          }`;
          action.innerHTML = `<button class="btn-action btn-supplier" onclick="window.open('${currentItem.link_toko}')">üõí BELI DI SUPPLIER (SHOPEE)</button>`;
        } else if (currentMode === "shopee") {
          tips.style.background = "#ffedd5";
          tips.style.color = "#9a3412";
          tips.innerHTML = `üé• <b>SHOPEE VID:</b> Cari barang ini di Shopee, ambil link affiliate kamu.`;

          document.getElementById(
            "captionBox"
          ).innerText = `${content.hook}\n\n${content.caption}\n\n${bridge}\n\nCek Keranjang Oranye ya! üëÜ\nJangan sampai kehabisan promonya bestie! ‚ú®\n\n${content.hashtag} #shopeevideo #racunshopee`;
          const searchLink = `https://shopee.co.id/search?keyword=${encodeURIComponent(
            currentItem.nama
          )}`;
          action.innerHTML = `<button class="btn-action btn-shopee" onclick="window.open('${searchLink}')">üîé CARI BARANG DI SHOPEE (AMBIL LINK)</button>`;
        } else {
          tips.style.background = "#f3f4f6";
          tips.style.color = "#1f2937";
          tips.innerHTML = `üéµ <b>TIKTOK:</b> Copy nama produk, cari manual di TikTok Shop.`;

          document.getElementById(
            "captionBox"
          ).innerText = `${content.hook}\n\n${content.caption}\n\n${bridge}\n\nCek Keranjang Kuning! üëÜ\nMumpung lagi ada promo gratis ongkir lho!\n\n${content.hashtag} #tiktokshop #fyp #racuntiktok`;
          action.innerHTML = `
                    <button class="btn-action btn-copy" style="margin-bottom:10px;" onclick="copyNamaProduk()">üìã COPY NAMA PRODUK</button>
                    <button class="btn-action btn-tiktok" onclick="window.open('https://www.tiktok.com/')">üéµ BUKA APLIKASI TIKTOK</button>
                `;
        }
      }

      // === UTILS ===
      function copyText() {
        navigator.clipboard.writeText(
          document.getElementById("captionBox").innerText
        );
        showToast("Caption Disalin!");
      }

      function copyNamaProduk() {
        navigator.clipboard.writeText(currentItem.nama);
        showToast("Nama Produk Disalin! Paste di TikTok Shop ya.");
      }

      function showToast(msg) {
        const t = document.getElementById("toast");
        t.innerText = "‚úÖ " + msg;
        t.className = "show";
        setTimeout(() => (t.className = ""), 3000);
      }

      function tutupModal(id) {
        document.getElementById(id).style.display = "none";
      }
      window.onclick = (e) => {
        if (e.target == document.getElementById("myModal"))
          tutupModal("myModal");
        if (e.target == document.getElementById("modalPanduan"))
          tutupModal("modalPanduan");
      };

      // Accordion Panduan
      const acc = document.getElementsByClassName("accordion");
      for (let i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function () {
          this.classList.toggle("active");
          const panel = this.nextElementSibling;
          panel.style.maxHeight = panel.style.maxHeight
            ? null
            : panel.scrollHeight + "px";
        });
      }
    </script>
  </body>
</html>
