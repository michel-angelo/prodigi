<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Affiliate Cuan Generator 2026</title>

    <script src="data_supplier.js"></script>
    <script src="data_konten.js"></script>

    <style>
      /* === RESET & VARIABLES === */
      * {
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
        outline: none;
      }

      :root {
        --primary: #059669;
        --primary-light: #10b981;
        --bg-body: #f3f4f6;
        --text-dark: #111827;
        --tiktok: #000000;
        --shopee: #ee4d2d;
        --wa: #25d366;
      }

      body {
        font-family: "Inter", sans-serif;
        background: var(--bg-body);
        margin: 0;
        color: var(--text-dark);
        overflow-x: hidden;
      }

      #main-app {
        display: none;
      }

      /* === HEADER === */
      .header {
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-light)
        );
        color: white;
        padding: 25px 20px 60px;
        border-bottom-left-radius: 35px;
        border-bottom-right-radius: 35px;
        text-align: center;
        box-shadow: 0 10px 30px rgba(16, 185, 129, 0.2);
      }
      .wa-input-wrapper {
        background: rgba(255, 255, 255, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.3);
        display: inline-flex;
        align-items: center;
        padding: 8px 15px;
        border-radius: 50px;
        backdrop-filter: blur(5px);
        margin-top: 10px;
      }
      .wa-input-wrapper input {
        background: transparent;
        border: none;
        color: white;
        font-weight: bold;
        width: 140px;
        font-size: 14px;
      }
      .wa-input-wrapper input::placeholder {
        color: rgba(255, 255, 255, 0.7);
      }

      .btn-panduan {
        background: rgba(0, 0, 0, 0.2);
        color: white;
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 12px;
        cursor: pointer;
        border: 1px solid rgba(255, 255, 255, 0.2);
        margin-top: 10px;
        display: inline-block;
      }

      /* SEARCH */
      .search-container {
        padding: 0 20px;
        margin-top: -30px;
        position: relative;
        z-index: 10;
        text-align: center;
      }
      .search-box {
        background: white;
        border-radius: 50px;
        padding: 5px 20px;
        display: flex;
        align-items: center;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
      }
      .search-box input {
        border: none;
        width: 100%;
        padding: 12px 0;
        font-size: 16px;
      }

      /* LIST PRODUK */
      .container {
        padding: 20px;
        padding-bottom: 100px;
        max-width: 600px;
        margin: 0 auto;
      }
      .product-list {
        display: grid;
        gap: 15px;
      }
      .card {
        background: white;
        padding: 20px;
        border-radius: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.02);
        border: 1px solid rgba(0, 0, 0, 0.03);
      }
      .card h3 {
        font-size: 16px;
        margin: 0 0 10px;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
      .meta-row {
        display: flex;
        justify-content: space-between;
        background: #f0fdf4;
        padding: 10px;
        border-radius: 10px;
        margin-bottom: 15px;
        font-size: 13px;
      }
      .btn-cuan {
        background: linear-gradient(
          to right,
          var(--primary),
          var(--primary-light)
        );
        color: white;
        border: none;
        padding: 12px;
        border-radius: 12px;
        font-weight: bold;
        cursor: pointer;
        width: 100%;
      }

      /* MODAL */
      .modal {
        display: none;
        position: fixed;
        z-index: 999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(4px);
      }
      .modal-content {
        background-color: #fff;
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        width: 100%;
        max-width: 500px;
        margin: auto;
        border-top-left-radius: 25px;
        border-top-right-radius: 25px;
        padding: 25px;
        max-height: 90vh;
        overflow-y: auto;
        animation: slideUp 0.3s ease;
      }
      @keyframes slideUp {
        from {
          transform: translateY(100%);
        }
        to {
          transform: translateY(0);
        }
      }

      /* TAB SWITCHER KEREN */
      .tab-container {
        display: flex;
        background: #f1f5f9;
        padding: 5px;
        border-radius: 12px;
        margin-bottom: 20px;
      }
      .tab-btn {
        flex: 1;
        padding: 10px 5px;
        text-align: center;
        font-size: 12px;
        font-weight: bold;
        border-radius: 10px;
        cursor: pointer;
        color: #64748b;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 5px;
      }
      .tab-btn.active.wa {
        background: white;
        color: var(--wa);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      }
      .tab-btn.active.shopee {
        background: white;
        color: var(--shopee);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      }
      .tab-btn.active.tiktok {
        background: white;
        color: var(--tiktok);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      }

      /* TIPS BOX */
      .tips-box {
        padding: 12px;
        border-radius: 10px;
        font-size: 12px;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
        line-height: 1.4;
      }

      .copy-area {
        background: #f8fafc;
        border: 1px dashed #cbd5e1;
        padding: 15px;
        border-radius: 12px;
        font-family: monospace;
        font-size: 12px;
        color: #334155;
        margin: 5px 0 15px;
        white-space: pre-wrap;
      }

      .btn-action {
        display: block;
        width: 100%;
        padding: 12px;
        margin-bottom: 8px;
        border-radius: 10px;
        text-align: center;
        font-weight: bold;
        text-decoration: none;
        font-size: 13px;
        cursor: pointer;
      }
      .btn-copy {
        background: #fef08a;
        color: #854d0e;
        border: 1px solid #fde047;
      }
      .btn-supplier {
        background: var(--primary);
        color: white;
        border: none;
      }
      .btn-shopee {
        background: var(--shopee);
        color: white;
        border: none;
      }
      .btn-tiktok {
        background: var(--tiktok);
        color: white;
        border: none;
      }

      /* SCREEN BLOKIR */
      #blocked-screen {
        display: none;
        text-align: center;
        padding: 60px 20px;
        color: #333;
      }
      .btn-beli-akses {
        display: block;
        width: 100%;
        background: #fbbf24;
        color: #92400e;
        padding: 15px;
        border-radius: 12px;
        font-weight: bold;
        text-decoration: none;
        margin: 20px 0;
        animation: pulse 2s infinite;
      }
      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.02);
        }
        100% {
          transform: scale(1);
        }
      }

      /* TOAST */
      #toast {
        visibility: hidden;
        min-width: 200px;
        background-color: #333;
        color: #fff;
        text-align: center;
        border-radius: 50px;
        padding: 12px 20px;
        position: fixed;
        z-index: 10000;
        left: 50%;
        bottom: 30px;
        transform: translateX(-50%);
        font-size: 13px;
      }
      #toast.show {
        visibility: visible;
        animation: fadein 0.5s, fadeout 0.5s 2.5s;
      }
      @keyframes fadein {
        from {
          bottom: 0;
          opacity: 0;
        }
        to {
          bottom: 30px;
          opacity: 1;
        }
      }
      @keyframes fadeout {
        from {
          bottom: 30px;
          opacity: 1;
        }
        to {
          bottom: 0;
          opacity: 0;
        }
      }

      /* PANDUAN MODAL */
      .accordion {
        background-color: #f9f9f9;
        cursor: pointer;
        padding: 15px;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        font-size: 14px;
        border-radius: 10px;
        margin-bottom: 5px;
        font-weight: bold;
      }
      .panel {
        padding: 0 15px;
        background-color: white;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.2s ease-out;
        font-size: 13px;
        color: #555;
      }
    </style>
  </head>
  <body>
    <div id="blocked-screen">
      <h1 style="font-size: 60px; margin: 0">‚õî</h1>
      <h2>AKSES DITOLAK</h2>
      <p>Masukkan kode akses premium atau beli sekarang.</p>
      <a
        href="https://wa.me/6281385042303?text=Halo%20Admin,%20mau%20beli%20akses%20Affiliate%20Generator."
        class="btn-beli-akses"
        >üîì BELI KODE AKSES</a
      >
      <button
        onclick="location.reload()"
        style="
          background: none;
          border: none;
          color: #888;
          text-decoration: underline;
          cursor: pointer;
          margin-top: 20px;
        "
      >
        Refresh Halaman
      </button>
    </div>

    <div id="main-app">
      <div class="header">
        <h1 style="margin: 0; font-size: 22px">üí∏ Affiliate Generator</h1>
        <p style="margin: 5px 0 15px; opacity: 0.9; font-size: 13px">
          Alat Bantu Cari Cuan 2026
        </p>

        <div class="wa-input-wrapper">
          <span>üìû WA:</span>
          <input type="tel" id="userPhone" placeholder="0812xxxx" />
        </div>
        <br />
        <div
          class="btn-panduan"
          onclick="document.getElementById('modalPanduan').style.display='block'"
        >
          üìò BACA PANDUAN CARA PAKAI
        </div>
      </div>

      <div class="search-container">
        <div class="search-box">
          <span style="font-size: 20px; margin-right: 10px">üîç</span>
          <input
            type="text"
            id="searchInput"
            placeholder="Cari barang (cth: Tas)"
          />
        </div>
      </div>

      <div class="container">
        <p
          style="
            text-align: center;
            font-size: 12px;
            color: #666;
            margin-bottom: 10px;
          "
        >
          Menemukan <b id="count">0</b> Produk:
        </p>
        <div class="product-list" id="productList"></div>

        <div
          style="
            text-align: center;
            margin-top: 30px;
            font-size: 12px;
            color: #999;
          "
        >
          App by
          <a
            href="https://instagram.com/faset.digital"
            style="color: var(--primary); text-decoration: none"
            >@faset.digital</a
          >
        </div>
      </div>
    </div>

    <div id="myModal" class="modal">
      <div class="modal-content">
        <span
          style="
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
          "
          onclick="tutupModal('myModal')"
          >&times;</span
        >
        <h3 style="text-align: center; margin-top: 0">‚öôÔ∏è PILIH MODE CUAN</h3>

        <div class="tab-container">
          <div id="tabWA" class="tab-btn active wa" onclick="gantiMode('wa')">
            üü¢ Dropship WA
          </div>
          <div id="tabShopee" class="tab-btn" onclick="gantiMode('shopee')">
            üü† Shopee Vid
          </div>
          <div id="tabTikTok" class="tab-btn" onclick="gantiMode('tiktok')">
            ‚ö´ TikTok Shop
          </div>
        </div>

        <div id="tipsBox" class="tips-box">Loading...</div>

        <p style="font-size: 12px; font-weight: bold; margin-bottom: 5px">
          CAPTION / DESKRIPSI:
        </p>
        <div class="copy-area" id="captionBox">Loading...</div>
        <button class="btn-action btn-copy" onclick="copyText()">
          üìã COPY CAPTION
        </button>

        <div
          id="actionArea"
          style="
            border-top: 1px solid #eee;
            padding-top: 15px;
            margin-top: 15px;
          "
        ></div>
      </div>
    </div>

    <div id="modalPanduan" class="modal">
      <div class="modal-content">
        <span
          style="
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
          "
          onclick="tutupModal('modalPanduan')"
          >&times;</span
        >
        <h3 style="text-align: center; color: var(--primary)">
          üéì AKADEMI CUAN
        </h3>

        <button class="accordion">1. Mode Dropship WA</button>
        <div class="panel">
          <p>
            Gunakan mode ini untuk jual ke teman/tetangga. Kamu ambil untung
            CASH di depan dari selisih harga.
          </p>
        </div>

        <button class="accordion">2. Mode Shopee Video</button>
        <div class="panel">
          <p>
            Upload video di Shopee Video, tautkan Keranjang Oranye. Gunakan
            tombol "Cari di Shopee" untuk ambil link produknya.
          </p>
        </div>

        <button class="accordion">3. Mode TikTok Shop</button>
        <div class="panel">
          <p>TikTok tidak bisa buka link produk langsung. Caranya:</p>
          <p>1. Klik tombol <b>COPY NAMA PRODUK</b>.</p>
          <p>2. Klik tombol <b>BUKA TIKTOK</b>.</p>
          <p>
            3. Di TikTok, Masuk ke Shop > Marketplace > Paste nama produk tadi.
          </p>
          <p>
            4. Tambahkan ke Showcase kamu, lalu tautkan ke video (Keranjang
            Kuning).
          </p>
        </div>
      </div>
    </div>

    <div id="toast">‚úÖ Berhasil Disalin!</div>

    <script>
      // === SECURITY CHECK ===
      (function () {
        const pass = "CUAN2026";
        if (sessionStorage.getItem("sudahLogin") === "true") {
          document.getElementById("main-app").style.display = "block";
        } else {
          setTimeout(() => {
            let input = prompt("üîí MASUKKAN KODE AKSES:");
            if (input === pass) {
              sessionStorage.setItem("sudahLogin", "true");
              document.getElementById("main-app").style.display = "block";
            } else {
              document.getElementById("blocked-screen").style.display = "block";
              document.body.style.backgroundColor = "#fff";
            }
          }, 100);
        }
      })();

      // === VARIABLES ===
      let currentItem = null;
      let currentMode = "wa";

      // === ELEMENTS ===
      const phoneInput = document.getElementById("userPhone");

      // WA Storage
      if (localStorage.getItem("userWA"))
        phoneInput.value = localStorage.getItem("userWA");
      phoneInput.addEventListener("input", (e) => {
        let val = e.target.value;
        if (val.startsWith("08")) val = "628" + val.slice(2);
        localStorage.setItem("userWA", val);
      });

      // Load Data
      if (typeof dataSupplier !== "undefined") {
        renderProduk(dataSupplier.sort(() => 0.5 - Math.random()).slice(0, 50));
      }

      document.getElementById("searchInput").addEventListener("keyup", (e) => {
        const k = e.target.value.toLowerCase();
        if (k.length < 3) return;
        renderProduk(
          dataSupplier
            .filter((i) => i.nama.toLowerCase().includes(k))
            .slice(0, 50)
        );
      });

      function renderProduk(data) {
        const list = document.getElementById("productList");
        list.innerHTML = "";
        document.getElementById("count").innerText = data.length;
        data.forEach((item) => {
          const modal = new Intl.NumberFormat("id-ID").format(item.harga_modal);
          const cuan = new Intl.NumberFormat("id-ID").format(
            item.harga_jual_saran - item.harga_modal
          );
          const div = document.createElement("div");
          div.className = "card";
          div.innerHTML = `<h3>${item.nama}</h3>
                    <div class="meta-row"><span>Modal: Rp ${modal}</span><span style="color:var(--primary); font-weight:bold;">Cuan: +Rp ${cuan}</span></div>
                    <button class="btn-cuan" onclick="openModal(${item.id})">üöÄ PROSES BARANG INI</button>`;
          list.appendChild(div);
        });
      }

      // === LOGIC MODAL ===
      function openModal(id) {
        currentItem = dataSupplier.find((x) => x.id === id);
        document.getElementById("myModal").style.display = "block";
        updateContent();
      }

      function gantiMode(mode) {
        currentMode = mode;
        document
          .querySelectorAll(".tab-btn")
          .forEach((b) => (b.className = "tab-btn"));
        document.getElementById(
          mode === "wa"
            ? "tabWA"
            : mode === "shopee"
            ? "tabShopee"
            : "tabTikTok"
        ).className = `tab-btn active ${mode}`;
        updateContent();
      }

      // === INI OTAK PINTARNYA ===
      function updateContent() {
        if (!currentItem) return;
        const tips = document.getElementById("tipsBox");
        const action = document.getElementById("actionArea");

        // 1. CARI JODOH KATEGORI (LEBIH PINTAR)
        let catContent = "umum";
        const k = currentItem.kategori.toLowerCase();
        const n = currentItem.nama.toLowerCase();

        // Mapping keyword supplier -> keyword konten
        if (
          k.includes("tas") ||
          k.includes("dompet") ||
          n.includes("bag") ||
          n.includes("wallet")
        )
          catContent = "fashion";
        else if (
          k.includes("jam") ||
          k.includes("watch") ||
          k.includes("kacamata")
        )
          catContent = "fashion";
        else if (
          k.includes("baju") ||
          k.includes("kemeja") ||
          k.includes("kaos") ||
          k.includes("dress") ||
          k.includes("celana")
        )
          catContent = "fashion";
        else if (
          k.includes("sepatu") ||
          k.includes("sandal") ||
          n.includes("shoes")
        )
          catContent = "fashion";
        else if (
          n.includes("serum") ||
          n.includes("cream") ||
          n.includes("wajah") ||
          n.includes("kulit") ||
          k.includes("kecantikan")
        )
          catContent = "skincare";
        else if (
          n.includes("panci") ||
          n.includes("pisau") ||
          n.includes("rak") ||
          n.includes("pel") ||
          k.includes("rumah")
        )
          catContent = "rumah_tangga";
        else if (n.includes("buku") || n.includes("alat tulis"))
          catContent = "pengembangan_diri";
        else if (
          n.includes("obat") ||
          n.includes("vitamin") ||
          n.includes("herbal")
        )
          catContent = "kesehatan";
        else if (
          n.includes("uang") ||
          n.includes("voucher") ||
          n.includes("pulsa")
        )
          catContent = "finansial";

        // Filter Konten
        let pool = dataKonten.filter((x) => x.kategori.includes(catContent));

        // FALLBACK: Kalau gak nemu konten spesifik, pake mode "Hard Selling Universal"
        // Biar gak maksa pake konten tips yang gak nyambung
        let content = null;
        let isUniversal = false;

        if (pool.length === 0) {
          isUniversal = true;
          content = {
            hook: "üî• RACUN TIKTOK CHECK!",
            caption:
              "Jujurly ini barang bagus banget sih. Nyesel kalau gak punya sekarang.",
            hashtag: "#racunshopee #tiktokshop #viral",
          };
        } else {
          content = pool[currentItem.id % pool.length];
        }

        // 2. RAKIT KALIMAT (BRIDGING)
        // Biar nyambung, kita selipin nama produk di antara Tips dan Link
        let bridgingSentence = "";
        if (!isUniversal) {
          // Kalimat penyambung biar luwes
          const bridges = [
            `Nah, biar makin pas sama tips di atas, Kakak wajib punya **${currentItem.nama}** ini!`,
            `Salah satu solusinya ya pakai **${currentItem.nama}** ini, Kak. Dijamin worth it!`,
            `Mumpung lagi promo, **${currentItem.nama}** ini cocok banget buat praktekin tips tadi.`,
            `Gak perlu bingung lagi, langsung aja checkout **${currentItem.nama}** biar masalah tadi beres!`,
          ];
          bridgingSentence =
            bridges[Math.floor(Math.random() * bridges.length)];
        } else {
          bridgingSentence = `Langsung aja kepoin **${currentItem.nama}** nya sekarang juga!`;
        }

        // 3. GENERATE FINAL TEKS SESUAI MODE
        let finalTeks = "";

        if (currentMode === "wa") {
          // MODE DROPSHIP WA
          let wa = localStorage.getItem("userWA") || "";
          let linkWA =
            wa.length > 5
              ? `https://wa.me/${wa}?text=${encodeURIComponent(
                  "Halo, mau pesan " + currentItem.nama
                )}`
              : "[ISI NOMOR WA DULU]";

          tips.style.background = "#dcfce7";
          tips.style.color = "#166534";
          tips.innerHTML = `üí° <b>DROPSHIP:</b> Jual ke teman/grup WA. Kamu dapet CASH di depan.`;

          finalTeks = `
${content.hook}

${content.caption}

${bridgingSentence}

üî• HARGA PROMO: Rp ${new Intl.NumberFormat("id-ID").format(
            currentItem.harga_jual_saran
          )}
(Normal: Rp ${new Intl.NumberFormat("id-ID").format(
            currentItem.harga_jual_saran * 1.5
          )})

Buruan pesen sebelum kehabisan!
Klik link ini buat Order via WA üëá:
${linkWA}

${content.hashtag}
                `.trim();

          action.innerHTML = `<button class="btn-action btn-supplier" onclick="window.open('${currentItem.link_toko}')">üõí BELI DI SUPPLIER (SHOPEE)</button>`;
        } else if (currentMode === "shopee") {
          // MODE SHOPEE VIDEO
          tips.style.background = "#ffedd5";
          tips.style.color = "#9a3412";
          tips.innerHTML = `üé• <b>SHOPEE VID:</b> Cari barang ini di Shopee, ambil link affiliate kamu.`;

          finalTeks = `
${content.hook}

${content.caption}

${bridgingSentence}

Cek Keranjang Oranye ya! üëÜ
Jangan sampai kehabisan promonya bestie! ‚ú®

${content.hashtag} #shopeevideo #racunshopee
                `.trim();

          const searchLink = `https://shopee.co.id/search?keyword=${encodeURIComponent(
            currentItem.nama
          )}`;
          action.innerHTML = `<button class="btn-action btn-shopee" onclick="window.open('${searchLink}')">üîé CARI BARANG DI SHOPEE (AMBIL LINK)</button>`;
        } else {
          // MODE TIKTOK SHOP
          tips.style.background = "#f3f4f6";
          tips.style.color = "#1f2937";
          tips.innerHTML = `üéµ <b>TIKTOK:</b> Copy nama produk, cari manual di TikTok Shop.`;

          finalTeks = `
${content.hook}

${content.caption}

${bridgingSentence}

Cek Keranjang Kuning! üëÜ
Mumpung lagi ada promo gratis ongkir lho!

${content.hashtag} #tiktokshop #fyp #racuntiktok
                `.trim();

          action.innerHTML = `
                    <button class="btn-action btn-copy" style="margin-bottom:10px;" onclick="copyNamaProduk()">üìã COPY NAMA PRODUK</button>
                    <button class="btn-action btn-tiktok" onclick="window.open('https://www.tiktok.com/')">üéµ BUKA APLIKASI TIKTOK</button>
                `;
        }

        document.getElementById("captionBox").innerText = finalTeks;
      }

      function copyText() {
        navigator.clipboard.writeText(
          document.getElementById("captionBox").innerText
        );
        showToast("Caption Disalin!");
      }

      function copyNamaProduk() {
        navigator.clipboard.writeText(currentItem.nama);
        showToast("Nama Produk Disalin! Paste di TikTok Shop ya.");
      }

      function showToast(msg) {
        const t = document.getElementById("toast");
        t.innerText = "‚úÖ " + msg;
        t.className = "show";
        setTimeout(() => (t.className = ""), 3000);
      }

      function tutupModal(id) {
        document.getElementById(id).style.display = "none";
      }

      const acc = document.getElementsByClassName("accordion");
      for (let i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function () {
          this.classList.toggle("active");
          const panel = this.nextElementSibling;
          panel.style.maxHeight = panel.style.maxHeight
            ? null
            : panel.scrollHeight + "px";
        });
      }
    </script>
  </body>
</html>
